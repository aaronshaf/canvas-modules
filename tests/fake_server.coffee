define [
  'sinon'
], (sinon) ->
  ->
    server = sinon.fakeServer.create()
    server.autoRespond = true
    # server.autoRespondAfter = 0

    # To do: auto-generate the fixtures

    server.respondWith '/api/v1/courses/1/modules', (xhr) ->
      xhr.respond 200,
        'Content-Type': 'application/json'
        'Link': '<http://localhost:3000/api/v1/courses/1/modules?include%5B%5D=items&include%5B%5D=content_details&page=1&per_page=50>; rel="current",<http://localhost:3000/api/v1/courses/1/modules?include%5B%5D=items&include%5B%5D=content_details&page=2&per_page=50>; rel="next",<http://localhost:3000/api/v1/courses/1/modules?include%5B%5D=items&include%5B%5D=content_details&page=1&per_page=50>; rel="first",<http://localhost:3000/api/v1/courses/1/modules?include%5B%5D=items&include%5B%5D=content_details&page=5&per_page=50>; rel="last"'
      , 'while(1);[{"id":1,"name":"Test 1","position":1,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":202,"items_url":"http://localhost:3000/api/v1/courses/1/modules/1/items"},{"id":2,"name":"Test 2","position":2,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":1,"items_url":"http://localhost:3000/api/v1/courses/1/modules/2/items","items":[{"id":1,"indent":0,"position":1,"title":"ffgdgf","type":"Assignment","module_id":2,"html_url":"http://localhost:3000/courses/1/modules/items/1","content_id":1,"url":"http://localhost:3000/api/v1/courses/1/assignments/1","published":true,"content_details":{"points_possible":10}}]},{"id":3,"name":"Module0","position":3,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/3/items","items":[]},{"id":4,"name":"Module1","position":4,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/4/items","items":[]},{"id":5,"name":"Module2","position":5,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/5/items","items":[]},{"id":6,"name":"Module3","position":6,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/6/items","items":[]},{"id":7,"name":"Module4","position":7,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/7/items","items":[]},{"id":8,"name":"Module5","position":8,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/8/items","items":[]},{"id":9,"name":"Module6","position":9,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/9/items","items":[]},{"id":10,"name":"Module7","position":10,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/10/items","items":[]},{"id":11,"name":"Module8","position":11,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/11/items","items":[]},{"id":12,"name":"Module9","position":12,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/12/items","items":[]},{"id":13,"name":"Module10","position":13,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/13/items","items":[]},{"id":14,"name":"Module11","position":14,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/14/items","items":[]},{"id":15,"name":"Module12","position":15,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/15/items","items":[]},{"id":16,"name":"Module13","position":16,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/16/items","items":[]},{"id":17,"name":"Module14","position":17,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/17/items","items":[]},{"id":18,"name":"Module15","position":18,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/18/items","items":[]},{"id":19,"name":"Module16","position":19,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/19/items","items":[]},{"id":20,"name":"Module17","position":20,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/20/items","items":[]},{"id":21,"name":"Module18","position":21,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/21/items","items":[]},{"id":22,"name":"Module19","position":22,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/22/items","items":[]},{"id":23,"name":"Module20","position":23,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/23/items","items":[]},{"id":24,"name":"Module21","position":24,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/24/items","items":[]},{"id":25,"name":"Module22","position":25,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/25/items","items":[]},{"id":26,"name":"Module23","position":26,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/26/items","items":[]},{"id":27,"name":"Module24","position":27,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/27/items","items":[]},{"id":28,"name":"Module25","position":28,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/28/items","items":[]},{"id":29,"name":"Module26","position":29,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/29/items","items":[]},{"id":30,"name":"Module27","position":30,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/30/items","items":[]},{"id":31,"name":"Module28","position":31,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/31/items","items":[]},{"id":32,"name":"Module29","position":32,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/32/items","items":[]},{"id":33,"name":"Module30","position":33,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/33/items","items":[]},{"id":34,"name":"Module31","position":34,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/34/items","items":[]},{"id":35,"name":"Module32","position":35,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/35/items","items":[]},{"id":36,"name":"Module33","position":36,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/36/items","items":[]},{"id":37,"name":"Module34","position":37,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/37/items","items":[]},{"id":38,"name":"Module35","position":38,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/38/items","items":[]},{"id":39,"name":"Module36","position":39,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/39/items","items":[]},{"id":40,"name":"Module37","position":40,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/40/items","items":[]},{"id":41,"name":"Module38","position":41,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/41/items","items":[]},{"id":42,"name":"Module39","position":42,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/42/items","items":[]},{"id":43,"name":"Module40","position":43,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/43/items","items":[]},{"id":44,"name":"Module41","position":44,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/44/items","items":[]},{"id":45,"name":"Module42","position":45,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/45/items","items":[]},{"id":46,"name":"Module43","position":46,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/46/items","items":[]},{"id":47,"name":"Module44","position":47,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/47/items","items":[]},{"id":48,"name":"Module45","position":48,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/48/items","items":[]},{"id":49,"name":"Module46","position":49,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/49/items","items":[]},{"id":50,"name":"Module47","position":50,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/50/items","items":[]}]'

    server.respondWith 'http://localhost:3000/api/v1/courses/1/modules?include%5B%5D=items&include%5B%5D=content_details&page=2&per_page=50', [
      200
        'Content-Type': 'application/json'
      , 'while(1);[{"id":51,"name":"Module48","position":51,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/51/items","items":[]},{"id":52,"name":"Module49","position":52,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/52/items","items":[]},{"id":53,"name":"Module50","position":53,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/53/items","items":[]},{"id":54,"name":"Module51","position":54,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/54/items","items":[]},{"id":55,"name":"Module52","position":55,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/55/items","items":[]},{"id":56,"name":"Module53","position":56,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/56/items","items":[]},{"id":57,"name":"Module54","position":57,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/57/items","items":[]},{"id":58,"name":"Module55","position":58,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/58/items","items":[]},{"id":59,"name":"Module56","position":59,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/59/items","items":[]},{"id":60,"name":"Module57","position":60,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/60/items","items":[]},{"id":61,"name":"Module58","position":61,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/61/items","items":[]},{"id":62,"name":"Module59","position":62,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/62/items","items":[]},{"id":63,"name":"Module60","position":63,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/63/items","items":[]},{"id":64,"name":"Module61","position":64,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/64/items","items":[]},{"id":65,"name":"Module62","position":65,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/65/items","items":[]},{"id":66,"name":"Module63","position":66,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/66/items","items":[]},{"id":67,"name":"Module64","position":67,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/67/items","items":[]},{"id":68,"name":"Module65","position":68,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/68/items","items":[]},{"id":69,"name":"Module66","position":69,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/69/items","items":[]},{"id":70,"name":"Module67","position":70,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/70/items","items":[]},{"id":71,"name":"Module68","position":71,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/71/items","items":[]},{"id":72,"name":"Module69","position":72,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/72/items","items":[]},{"id":73,"name":"Module70","position":73,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/73/items","items":[]},{"id":74,"name":"Module71","position":74,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/74/items","items":[]},{"id":75,"name":"Module72","position":75,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/75/items","items":[]},{"id":76,"name":"Module73","position":76,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/76/items","items":[]},{"id":77,"name":"Module74","position":77,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/77/items","items":[]},{"id":78,"name":"Module75","position":78,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/78/items","items":[]},{"id":79,"name":"Module76","position":79,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/79/items","items":[]},{"id":80,"name":"Module77","position":80,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/80/items","items":[]},{"id":81,"name":"Module78","position":81,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/81/items","items":[]},{"id":82,"name":"Module79","position":82,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/82/items","items":[]},{"id":83,"name":"Module80","position":83,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/83/items","items":[]},{"id":84,"name":"Module81","position":84,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/84/items","items":[]},{"id":85,"name":"Module82","position":85,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/85/items","items":[]},{"id":86,"name":"Module83","position":86,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/86/items","items":[]},{"id":87,"name":"Module84","position":87,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/87/items","items":[]},{"id":88,"name":"Module85","position":88,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/88/items","items":[]},{"id":89,"name":"Module86","position":89,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/89/items","items":[]},{"id":90,"name":"Module87","position":90,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/90/items","items":[]},{"id":91,"name":"Module88","position":91,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/91/items","items":[]},{"id":92,"name":"Module89","position":92,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/92/items","items":[]},{"id":93,"name":"Module90","position":93,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/93/items","items":[]},{"id":94,"name":"Module91","position":94,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/94/items","items":[]},{"id":95,"name":"Module92","position":95,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/95/items","items":[]},{"id":96,"name":"Module93","position":96,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/96/items","items":[]},{"id":97,"name":"Module94","position":97,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/97/items","items":[]},{"id":98,"name":"Module95","position":98,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/98/items","items":[]},{"id":99,"name":"Module96","position":99,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/99/items","items":[]},{"id":100,"name":"Module97","position":100,"unlock_at":null,"require_sequential_progress":false,"prerequisite_module_ids":[],"published":true,"items_count":0,"items_url":"http://localhost:3000/api/v1/courses/1/modules/100/items","items":[]}]'
    ]

    server.respondWith 'http://localhost:3000/api/v1/courses/1/modules/1/items?include%5B%5D=content_details', [
      200
        'Content-Type': 'application/json'
        'Link': '<http://localhost:3000/api/v1/courses/1/modules/1/items?include%5B%5D=content_details&page=1&per_page=10>; rel="current",<http://localhost:3000/api/v1/courses/1/modules/1/items?include%5B%5D=content_details&page=2&per_page=10>; rel="next",<http://localhost:3000/api/v1/courses/1/modules/1/items?include%5B%5D=content_details&page=1&per_page=10>; rel="first",<http://localhost:3000/api/v1/courses/1/modules/1/items?include%5B%5D=content_details&page=21&per_page=10>; rel="last"'
      , 'while(1);[{"id":2,"indent":0,"position":1,"title":"Bla bla bla","type":"Discussion","module_id":1,"html_url":"http://localhost:3000/courses/1/modules/items/2","content_id":1,"url":"http://localhost:3000/api/v1/courses/1/discussion_topics/1","published":true,"content_details":{}},{"id":3,"indent":0,"position":2,"title":"ffgdgf","type":"Assignment","module_id":1,"html_url":"http://localhost:3000/courses/1/modules/items/3","content_id":1,"url":"http://localhost:3000/api/v1/courses/1/assignments/1","published":true,"content_details":{"points_possible":10}},{"id":4,"indent":0,"position":3,"title":"0","type":"ExternalUrl","module_id":1,"html_url":"http://localhost:3000/api/v1/courses/1/module_item_redirect/4","external_url":"http://www.cnn.com/","published":true,"content_details":{}},{"id":5,"indent":0,"position":4,"title":"1","type":"ExternalUrl","module_id":1,"html_url":"http://localhost:3000/api/v1/courses/1/module_item_redirect/5","external_url":"http://www.cnn.com/","published":true,"content_details":{}},{"id":6,"indent":0,"position":5,"title":"2","type":"ExternalUrl","module_id":1,"html_url":"http://localhost:3000/api/v1/courses/1/module_item_redirect/6","external_url":"http://www.cnn.com/","published":true,"content_details":{}},{"id":7,"indent":0,"position":6,"title":"3","type":"ExternalUrl","module_id":1,"html_url":"http://localhost:3000/api/v1/courses/1/module_item_redirect/7","external_url":"http://www.cnn.com/","published":true,"content_details":{}},{"id":8,"indent":0,"position":7,"title":"4","type":"ExternalUrl","module_id":1,"html_url":"http://localhost:3000/api/v1/courses/1/module_item_redirect/8","external_url":"http://www.cnn.com/","published":true,"content_details":{}},{"id":9,"indent":0,"position":8,"title":"5","type":"ExternalUrl","module_id":1,"html_url":"http://localhost:3000/api/v1/courses/1/module_item_redirect/9","external_url":"http://www.cnn.com/","published":true,"content_details":{}},{"id":10,"indent":0,"position":9,"title":"6","type":"ExternalUrl","module_id":1,"html_url":"http://localhost:3000/api/v1/courses/1/module_item_redirect/10","external_url":"http://www.cnn.com/","published":true,"content_details":{}},{"id":11,"indent":0,"position":10,"title":"7","type":"ExternalUrl","module_id":1,"html_url":"http://localhost:3000/api/v1/courses/1/module_item_redirect/11","external_url":"http://www.cnn.com/","published":true,"content_details":{}}]'
    ]

    server.respondWith 'http://localhost:3000/api/v1/courses/1/modules/1/items?include%5B%5D=content_details&page=2&per_page=10', [
      200
        'Content-Type': 'application/json'
      , 'while(1);[{"id":12,"indent":0,"position":11,"title":"8","type":"ExternalUrl","module_id":1,"html_url":"http://localhost:3000/api/v1/courses/1/module_item_redirect/12","external_url":"http://www.cnn.com/","published":true,"content_details":{}},{"id":13,"indent":0,"position":12,"title":"9","type":"ExternalUrl","module_id":1,"html_url":"http://localhost:3000/api/v1/courses/1/module_item_redirect/13","external_url":"http://www.cnn.com/","published":true,"content_details":{}},{"id":14,"indent":0,"position":13,"title":"10","type":"ExternalUrl","module_id":1,"html_url":"http://localhost:3000/api/v1/courses/1/module_item_redirect/14","external_url":"http://www.cnn.com/","published":true,"content_details":{}},{"id":15,"indent":0,"position":14,"title":"11","type":"ExternalUrl","module_id":1,"html_url":"http://localhost:3000/api/v1/courses/1/module_item_redirect/15","external_url":"http://www.cnn.com/","published":true,"content_details":{}},{"id":16,"indent":0,"position":15,"title":"12","type":"ExternalUrl","module_id":1,"html_url":"http://localhost:3000/api/v1/courses/1/module_item_redirect/16","external_url":"http://www.cnn.com/","published":true,"content_details":{}},{"id":17,"indent":0,"position":16,"title":"13","type":"ExternalUrl","module_id":1,"html_url":"http://localhost:3000/api/v1/courses/1/module_item_redirect/17","external_url":"http://www.cnn.com/","published":true,"content_details":{}},{"id":18,"indent":0,"position":17,"title":"14","type":"ExternalUrl","module_id":1,"html_url":"http://localhost:3000/api/v1/courses/1/module_item_redirect/18","external_url":"http://www.cnn.com/","published":true,"content_details":{}},{"id":19,"indent":0,"position":18,"title":"15","type":"ExternalUrl","module_id":1,"html_url":"http://localhost:3000/api/v1/courses/1/module_item_redirect/19","external_url":"http://www.cnn.com/","published":true,"content_details":{}},{"id":20,"indent":0,"position":19,"title":"16","type":"ExternalUrl","module_id":1,"html_url":"http://localhost:3000/api/v1/courses/1/module_item_redirect/20","external_url":"http://www.cnn.com/","published":true,"content_details":{}},{"id":21,"indent":0,"position":20,"title":"17","type":"ExternalUrl","module_id":1,"html_url":"http://localhost:3000/api/v1/courses/1/module_item_redirect/21","external_url":"http://www.cnn.com/","published":true,"content_details":{}}]'
    ]

    server.respond (xhr) ->
      console.log 'link', xhr.url

    server
